# git-cliff ~ context-only configuration (no remote calls)
# Used for generating JSON context for the UI without querying GitLab/GitHub APIs

[git]
conventional_commits = true
filter_unconventional = false
split_commits = false
protect_breaking_commits = true
filter_commits = false
# Do not restrict by tags to support repositories without semver tags
tag_pattern = ".*"
skip_tags = ""
ignore_tags = ""
topo_order = false
sort_commits = "oldest"

# Keep the same grouping used by the UI/frontend config
commit_parsers = [
    { message = "^feat", group = "<!-- 0 -->ğŸ”ï¸ Features" },
    { message = "^fix", group = "<!-- 1 -->ğŸ› Bug Fixes" },
    { message = "^doc", group = "<!-- 2 -->ğŸ“š Documentation" },
    { message = "^perf", group = "<!-- 3 -->ğŸš€ Performance" },
    { message = "^refactor", group = "<!-- 4 -->ğŸšœ Refactor" },
    { message = "^style", group = "<!-- 5 -->ğŸ¨ Styling" },
    { message = "^test", group = "<!-- 6 -->ğŸ§ª Testing" },
    { message = "^build|^deps", group = "<!-- 7 -->ğŸ“¦ Build & Dependencies" },
    { message = "^ci", group = "<!-- 8 -->ğŸ”§ CI/CD" },
    { message = "^security", group = "<!-- 0 -->ğŸ”’ Security" },
    { message = "^revert", group = "<!-- 9 -->â—€ï¸ Revert" },
    # Skip noisy chores
    { message = "^chore\\(deps.*\\)", skip = true },
    { message = "^chore\\(pr\\)", skip = true },
    { message = "^chore\\(pull\\)", skip = true },
    { message = "^chore\\(release\\): prepare for", skip = true },
    { message = "^chore", group = "<!-- 10 -->âš™ï¸ Miscellaneous Tasks" },
    # Fallback
    { message = ".*", group = "<!-- 99 -->â™»ï¸ Other" },
]

[changelog]
body = "{{ body }}"  # Include commit body (PR description)

# Link parsers are OK here (no network), they just annotate context
link_parsers = [
    { pattern = "#(\\d+)", href = "https://github.com/dannie-cc/mes-core/issues/$1" },
    { pattern = "!(\\d+)", href = "https://github.com/dannie-cc/mes-core/pull/$1" },
    { pattern = "RFC(\\d+)", text = "ietf-rfc$1", href = "https://datatracker.ietf.org/doc/html/rfc$1" },
]
