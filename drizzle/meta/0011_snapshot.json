{
  "id": "aaf02542-fde2-4bc6-be9e-5f6824c322d7",
  "prevId": "cec4e63d-e811-4669-8f71-ea320d2c7ed1",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.attachments": {
      "name": "attachments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "attachment_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "file_name": {
          "name": "file_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "mime_type": {
          "name": "mime_type",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "filesize": {
          "name": "filesize",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_uploaded": {
          "name": "is_uploaded",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "_created": {
          "name": "_created",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "_updated": {
          "name": "_updated",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "_deleted": {
          "name": "_deleted",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "attachment_user_idx": {
          "name": "attachment_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "attachment_type_idx": {
          "name": "attachment_type_idx",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "attachment_date_idx": {
          "name": "attachment_date_idx",
          "columns": [
            {
              "expression": "_created",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "attachment_user_date_idx": {
          "name": "attachment_user_date_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "_created",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "attachment_user_type_idx": {
          "name": "attachment_user_type_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "attachments_user_id_users_id_fk": {
          "name": "attachments_user_id_users_id_fk",
          "tableFrom": "attachments",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "attachment_size_positive": {
          "name": "attachment_size_positive",
          "value": "\"attachments\".\"filesize\" > 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.guests": {
      "name": "guests",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "consent": {
          "name": "consent",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "guests_email_idx": {
          "name": "guests_email_idx",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "guests_email_unique": {
          "name": "guests_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.notifications": {
      "name": "notifications",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "way": {
          "name": "way",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "subject": {
          "name": "subject",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "varchar(1000)",
          "primaryKey": false,
          "notNull": true
        },
        "read_at": {
          "name": "read_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "data": {
          "name": "data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "_created": {
          "name": "_created",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "_updated": {
          "name": "_updated",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "_deleted": {
          "name": "_deleted",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "notifications_user_id_users_id_fk": {
          "name": "notifications_user_id_users_id_fk",
          "tableFrom": "notifications",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.orders": {
      "name": "orders",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_date": {
          "name": "order_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "shipping_address": {
          "name": "shipping_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "tracking_number": {
          "name": "tracking_number",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "total_amount": {
          "name": "total_amount",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "currency_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'USD'"
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "_created": {
          "name": "_created",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "_updated": {
          "name": "_updated",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "_deleted": {
          "name": "_deleted",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "user_order_idx": {
          "name": "user_order_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_date_range_idx": {
          "name": "order_date_range_idx",
          "columns": [
            {
              "expression": "order_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "user_date_idx": {
          "name": "user_date_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "order_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_metadata_gin_idx": {
          "name": "order_metadata_gin_idx",
          "columns": [
            {
              "expression": "metadata",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "unique_tracking_number": {
          "name": "unique_tracking_number",
          "columns": [
            {
              "expression": "tracking_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "tracking_number IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "orders_user_id_users_id_fk": {
          "name": "orders_user_id_users_id_fk",
          "tableFrom": "orders",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "order_total_amount_non_negative": {
          "name": "order_total_amount_non_negative",
          "value": "\"orders\".\"total_amount\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.pricing_rules": {
      "name": "pricing_rules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "conditions": {
          "name": "conditions",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "base_price": {
          "name": "base_price",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "multipliers": {
          "name": "multipliers",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "currency": {
          "name": "currency",
          "type": "currency_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'USD'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "valid_from": {
          "name": "valid_from",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "valid_to": {
          "name": "valid_to",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "_created": {
          "name": "_created",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "_updated": {
          "name": "_updated",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "_deleted": {
          "name": "_deleted",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "password": {
          "name": "password",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "first_name": {
          "name": "first_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "last_name": {
          "name": "last_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "is_verified": {
          "name": "is_verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "verification_token": {
          "name": "verification_token",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "_created": {
          "name": "_created",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "_updated": {
          "name": "_updated",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "_deleted": {
          "name": "_deleted",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "stripeCustomerId": {
          "name": "stripeCustomerId",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "airwallexCustomerId": {
          "name": "airwallexCustomerId",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "user_email_idx": {
          "name": "user_email_idx",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "user_first_name_idx": {
          "name": "user_first_name_idx",
          "columns": [
            {
              "expression": "first_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "user_last_name_idx": {
          "name": "user_last_name_idx",
          "columns": [
            {
              "expression": "last_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_email_unique": {
          "name": "users_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.order_stage_files": {
      "name": "order_stage_files",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "order_stage_id": {
          "name": "order_stage_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "file_name": {
          "name": "file_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "file_path": {
          "name": "file_path",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": true
        },
        "file_type": {
          "name": "file_type",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "file_size": {
          "name": "file_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "uploaded_by": {
          "name": "uploaded_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "_created": {
          "name": "_created",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "stage_files_stage_idx": {
          "name": "stage_files_stage_idx",
          "columns": [
            {
              "expression": "order_stage_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "stage_files_type_idx": {
          "name": "stage_files_type_idx",
          "columns": [
            {
              "expression": "file_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "stage_files_uploaded_by_idx": {
          "name": "stage_files_uploaded_by_idx",
          "columns": [
            {
              "expression": "uploaded_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "order_stage_files_order_stage_id_order_stages_id_fk": {
          "name": "order_stage_files_order_stage_id_order_stages_id_fk",
          "tableFrom": "order_stage_files",
          "tableTo": "order_stages",
          "columnsFrom": [
            "order_stage_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "order_stage_files_uploaded_by_users_id_fk": {
          "name": "order_stage_files_uploaded_by_users_id_fk",
          "tableFrom": "order_stage_files",
          "tableTo": "users",
          "columnsFrom": [
            "uploaded_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.order_stage_history": {
      "name": "order_stage_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "order_stage_id": {
          "name": "order_stage_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "previous_status": {
          "name": "previous_status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "new_status": {
          "name": "new_status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "change_reason": {
          "name": "change_reason",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "changed_by": {
          "name": "changed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "_created": {
          "name": "_created",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "stage_history_stage_idx": {
          "name": "stage_history_stage_idx",
          "columns": [
            {
              "expression": "order_stage_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "stage_history_date_idx": {
          "name": "stage_history_date_idx",
          "columns": [
            {
              "expression": "_created",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "stage_history_changed_by_idx": {
          "name": "stage_history_changed_by_idx",
          "columns": [
            {
              "expression": "changed_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "order_stage_history_order_stage_id_order_stages_id_fk": {
          "name": "order_stage_history_order_stage_id_order_stages_id_fk",
          "tableFrom": "order_stage_history",
          "tableTo": "order_stages",
          "columnsFrom": [
            "order_stage_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "order_stage_history_changed_by_users_id_fk": {
          "name": "order_stage_history_changed_by_users_id_fk",
          "tableFrom": "order_stage_history",
          "tableTo": "users",
          "columnsFrom": [
            "changed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.order_stages": {
      "name": "order_stages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "stage_name": {
          "name": "stage_name",
          "type": "order_stages_name_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "order_stages_status_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "details": {
          "name": "details",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "sequence": {
          "name": "sequence",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "estimated_days": {
          "name": "estimated_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "_created": {
          "name": "_created",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "_updated": {
          "name": "_updated",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "order_stages_order_idx": {
          "name": "order_stages_order_idx",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_stages_sequence_idx": {
          "name": "order_stages_sequence_idx",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "sequence",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_stages_active_idx": {
          "name": "order_stages_active_idx",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_stages_status_idx": {
          "name": "order_stages_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_stages_name_idx": {
          "name": "order_stages_name_idx",
          "columns": [
            {
              "expression": "stage_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "order_stages_order_id_orders_id_fk": {
          "name": "order_stages_order_id_orders_id_fk",
          "tableFrom": "order_stages",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "stage_sequence_positive": {
          "name": "stage_sequence_positive",
          "value": "\"order_stages\".\"sequence\" > 0"
        },
        "stage_estimated_days_positive": {
          "name": "stage_estimated_days_positive",
          "value": "\"order_stages\".\"estimated_days\" > 0"
        },
        "stage_valid_status": {
          "name": "stage_valid_status",
          "value": "\"order_stages\".\"status\" IN ('pending', 'in_progress', 'on_hold', 'awaiting_payment', 'completed', 'cancelled', 'refunded', 'failed')"
        }
      },
      "isRLSEnabled": false
    },
    "public.tickets": {
      "name": "tickets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "phone": {
          "name": "phone",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "company": {
          "name": "company",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "ticket_type_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "subject": {
          "name": "subject",
          "type": "varchar(2000)",
          "primaryKey": false,
          "notNull": true
        },
        "last_message_at": {
          "name": "last_message_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "inet",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "ticket_status_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'open'"
        },
        "ticket_number": {
          "name": "ticket_number",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "tickets_user_id_users_id_fk": {
          "name": "tickets_user_id_users_id_fk",
          "tableFrom": "tickets",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "tickets_ticket_number_unique": {
          "name": "tickets_ticket_number_unique",
          "nullsNotDistinct": false,
          "columns": [
            "ticket_number"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_addresses": {
      "name": "user_addresses",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "label": {
          "name": "label",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "full_name": {
          "name": "full_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "phone": {
          "name": "phone",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "company": {
          "name": "company",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "line1": {
          "name": "line1",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "line2": {
          "name": "line2",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "state": {
          "name": "state",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "postal_code": {
          "name": "postal_code",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "country_code": {
          "name": "country_code",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": true
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "_created": {
          "name": "_created",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "_updated": {
          "name": "_updated",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "_deleted": {
          "name": "_deleted",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "user_address_user_idx": {
          "name": "user_address_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "user_address_default_idx": {
          "name": "user_address_default_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_default",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "user_default_address_unique": {
          "name": "user_default_address_unique",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "is_default IS TRUE",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_addresses_user_id_users_id_fk": {
          "name": "user_addresses_user_id_users_id_fk",
          "tableFrom": "user_addresses",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.message_attachments": {
      "name": "message_attachments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "message_id": {
          "name": "message_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "attachment_id": {
          "name": "attachment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "message_attachments_message_id_ticket_messages_id_fk": {
          "name": "message_attachments_message_id_ticket_messages_id_fk",
          "tableFrom": "message_attachments",
          "tableTo": "ticket_messages",
          "columnsFrom": [
            "message_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "message_attachments_attachment_id_attachments_id_fk": {
          "name": "message_attachments_attachment_id_attachments_id_fk",
          "tableFrom": "message_attachments",
          "tableTo": "attachments",
          "columnsFrom": [
            "attachment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ticket_messages": {
      "name": "ticket_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "ticket_id": {
          "name": "ticket_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sender_id": {
          "name": "sender_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "sender_type": {
          "name": "sender_type",
          "type": "sender_type_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'user'"
        },
        "is_internal": {
          "name": "is_internal",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "message_type": {
          "name": "message_type",
          "type": "message_type_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'message'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "ticket_messages_ticket_id_tickets_id_fk": {
          "name": "ticket_messages_ticket_id_tickets_id_fk",
          "tableFrom": "ticket_messages",
          "tableTo": "tickets",
          "columnsFrom": [
            "ticket_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "ticket_messages_sender_id_users_id_fk": {
          "name": "ticket_messages_sender_id_users_id_fk",
          "tableFrom": "ticket_messages",
          "tableTo": "users",
          "columnsFrom": [
            "sender_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_settings": {
      "name": "user_settings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "consent": {
          "name": "consent",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "user_settings_user_idx": {
          "name": "user_settings_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "user_settings_user_unique_idx": {
          "name": "user_settings_user_unique_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_settings_user_id_users_id_fk": {
          "name": "user_settings_user_id_users_id_fk",
          "tableFrom": "user_settings",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.order_attachments": {
      "name": "order_attachments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "attachment_id": {
          "name": "attachment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "attachment_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "order_attachment_order_idx": {
          "name": "order_attachment_order_idx",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_attachment_attachment_idx": {
          "name": "order_attachment_attachment_idx",
          "columns": [
            {
              "expression": "attachment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "unique_order_attachment_version": {
          "name": "unique_order_attachment_version",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "version",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "order_attachments_order_id_orders_id_fk": {
          "name": "order_attachments_order_id_orders_id_fk",
          "tableFrom": "order_attachments",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "order_attachments_attachment_id_attachments_id_fk": {
          "name": "order_attachments_attachment_id_attachments_id_fk",
          "tableFrom": "order_attachments",
          "tableTo": "attachments",
          "columnsFrom": [
            "attachment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.result_set_attachments": {
      "name": "result_set_attachments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "result_set_id": {
          "name": "result_set_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_attachment_id": {
          "name": "order_attachment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "rs_attach_result_idx": {
          "name": "rs_attach_result_idx",
          "columns": [
            {
              "expression": "result_set_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "rs_attach_order_attach_idx": {
          "name": "rs_attach_order_attach_idx",
          "columns": [
            {
              "expression": "order_attachment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "result_set_attachments_result_set_id_result_sets_id_fk": {
          "name": "result_set_attachments_result_set_id_result_sets_id_fk",
          "tableFrom": "result_set_attachments",
          "tableTo": "result_sets",
          "columnsFrom": [
            "result_set_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "result_set_attachments_order_attachment_id_order_attachments_id_fk": {
          "name": "result_set_attachments_order_attachment_id_order_attachments_id_fk",
          "tableFrom": "result_set_attachments",
          "tableTo": "order_attachments",
          "columnsFrom": [
            "order_attachment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.result_sets": {
      "name": "result_sets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "result_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "result_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "details": {
          "name": "details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "result_sets_order_idx": {
          "name": "result_sets_order_idx",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "result_sets_type_idx": {
          "name": "result_sets_type_idx",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "result_sets_order_id_orders_id_fk": {
          "name": "result_sets_order_id_orders_id_fk",
          "tableFrom": "result_sets",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.attachment_type": {
      "name": "attachment_type",
      "schema": "public",
      "values": [
        "gerber",
        "bom",
        "centroid",
        "schematic",
        "assembly_drawing",
        "pick_and_place",
        "specification",
        "other"
      ]
    },
    "public.currency_enum": {
      "name": "currency_enum",
      "schema": "public",
      "values": [
        "USD",
        "EUR",
        "TRY",
        "CNY"
      ]
    },
    "public.order_stages_name_enum": {
      "name": "order_stages_name_enum",
      "schema": "public",
      "values": [
        "draft",
        "contract_signature",
        "payment",
        "engineering_review",
        "component_sourcing",
        "production",
        "assembly",
        "testing",
        "quality_control",
        "packaging",
        "shipping",
        "customs",
        "delivery"
      ]
    },
    "public.order_stages_status_enum": {
      "name": "order_stages_status_enum",
      "schema": "public",
      "values": [
        "pending",
        "in_progress",
        "on_hold",
        "awaiting_payment",
        "completed",
        "cancelled",
        "refunded",
        "failed"
      ]
    },
    "public.payment_provider_enum": {
      "name": "payment_provider_enum",
      "schema": "public",
      "values": [
        "stripe",
        "iyzico",
        "airwallex"
      ]
    },
    "public.ticket_status_enum": {
      "name": "ticket_status_enum",
      "schema": "public",
      "values": [
        "open",
        "closed",
        "in_progress",
        "resolved",
        "archived"
      ]
    },
    "public.ticket_type_enum": {
      "name": "ticket_type_enum",
      "schema": "public",
      "values": [
        "question",
        "quotation",
        "feedback",
        "complaint",
        "general"
      ]
    },
    "public.message_type_enum": {
      "name": "message_type_enum",
      "schema": "public",
      "values": [
        "message",
        "status_change",
        "note"
      ]
    },
    "public.sender_type_enum": {
      "name": "sender_type_enum",
      "schema": "public",
      "values": [
        "user",
        "admin",
        "system"
      ]
    },
    "public.result_status": {
      "name": "result_status",
      "schema": "public",
      "values": [
        "passed",
        "failed"
      ]
    },
    "public.result_type": {
      "name": "result_type",
      "schema": "public",
      "values": [
        "dfm",
        "smt"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.order_details_view": {
      "columns": {
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_date": {
          "name": "order_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "shipping_address": {
          "name": "shipping_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "tracking_number": {
          "name": "tracking_number",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "total_amount": {
          "name": "total_amount",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "currency_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "order_created_at": {
          "name": "order_created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "order_updated_at": {
          "name": "order_updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "order_deleted_at": {
          "name": "order_deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "current_stage_id": {
          "name": "current_stage_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "current_stage_name": {
          "name": "current_stage_name",
          "type": "order_stages_name_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "current_stage_sequence": {
          "name": "current_stage_sequence",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "current_stage_status": {
          "name": "current_stage_status",
          "type": "order_stages_status_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "current_stage_estimated_days": {
          "name": "current_stage_estimated_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "total_stages": {
          "name": "total_stages",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "completed_stages": {
          "name": "completed_stages",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "in_progress_stages": {
          "name": "in_progress_stages",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "pending_stages": {
          "name": "pending_stages",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "on_hold_stages": {
          "name": "on_hold_stages",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "all_stages": {
          "name": "all_stages",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "latest_attachments": {
          "name": "latest_attachments",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "total_files_count": {
          "name": "total_files_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "workflow_type": {
          "name": "workflow_type",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "product_type": {
          "name": "product_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "product_complexity": {
          "name": "product_complexity",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "business_priority": {
          "name": "business_priority",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "customer_tier": {
          "name": "customer_tier",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "is_rush_order": {
          "name": "is_rush_order",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        }
      },
      "definition": "\nWITH attachments_latest AS (\n    SELECT\n      oa.order_id,\n      jsonb_agg(\n        jsonb_build_object(\n          'orderAttachmentId', oa.id,\n         'attachmentId', oa.attachment_id,\n          'type', oa.type,\n          'version', oa.version,\n          'resultSetId', rs.id,\n          'status', rs.status\n        )\n      ) AS latest_attachments\n    FROM (\n      SELECT DISTINCT ON (oa.order_id, oa.type)\n        oa.*\n      FROM order_attachments oa\n      ORDER BY oa.order_id, oa.type, oa.version DESC\n    ) oa\n    LEFT JOIN result_set_attachments rsa ON rsa.order_attachment_id = oa.id\n    LEFT JOIN result_sets rs ON rs.id = rsa.result_set_id\n    GROUP BY oa.order_id\n)\nSELECT\n    -- Order information\n    o.id as order_id,\n    o.user_id,\n    (o.metadata->'product'->>'quantity')::integer as quantity,\n    o.order_date,\n    o.shipping_address,\n    o.tracking_number,\n    o.total_amount,\n    o.currency,\n    o.metadata,\n    o._created as order_created_at,\n    o._updated as order_updated_at,\n    o._deleted as order_deleted_at,\n\n    -- Current active stage\n    current_stage.id as current_stage_id,\n    current_stage.stage_name as current_stage_name,\n    current_stage.status as current_stage_status,\n    current_stage.sequence as current_stage_sequence,\n    current_stage.estimated_days as current_stage_estimated_days,\n\n    -- ALL stages JSON\n    COALESCE(\n        json_agg(\n            json_build_object(\n                'id', all_stages.id,\n                'stageName', all_stages.stage_name,\n                'status', all_stages.status,\n                'details', all_stages.details,\n                'sequence', all_stages.sequence,\n                'estimatedDays', all_stages.estimated_days,\n                'isActive', all_stages.is_active,\n                'metadata', all_stages.metadata,\n                'createdAt', all_stages._created,\n                'updatedAt', all_stages._updated,\n                'filesCount', COALESCE(stage_files.files_count, 0)\n            ) ORDER BY all_stages.sequence\n        ) FILTER (WHERE all_stages.id IS NOT NULL),\n        '[]'::json\n    ) as all_stages,\n\n    COALESCE(a.latest_attachments, '[]'::jsonb) as latest_attachments,\n\n    CASE\n        WHEN current_stage.status = 'cancelled' THEN 'cancelled'\n        WHEN current_stage.status = 'refunded' THEN 'refunded'\n        WHEN current_stage.stage_name = 'delivery' AND current_stage.status = 'completed' THEN 'delivered'\n        WHEN current_stage.status = 'completed' THEN 'processing'\n        WHEN current_stage.status = 'in_progress' THEN 'processing'\n        WHEN current_stage.status = 'on_hold' THEN 'on_hold'\n        WHEN current_stage.status = 'awaiting_payment' THEN 'awaiting_payment'\n        WHEN current_stage.status = 'failed' THEN 'failed'\n        ELSE 'pending'\n    END as overall_status,\n\n    -- Progress % calc\n    CASE\n        WHEN stage_counts.total_stages > 0 THEN\n            ROUND((current_stage.sequence::decimal / stage_counts.total_stages::decimal) * 100, 2)\n        ELSE 0\n    END as progress_percentage,\n\n    -- Stage counts\n    stage_counts.total_stages,\n    stage_counts.completed_stages,\n    stage_counts.in_progress_stages,\n    stage_counts.pending_stages,\n    stage_counts.on_hold_stages,\n\n    COALESCE(current_stage_files.files_count, 0) as current_stage_files_count,\n    COALESCE(total_files.total_files_count, 0) as total_files_count,\n\n    o.metadata->'workflow'->>'type' as workflow_type,\n    o.metadata->'product'->>'type' as product_type,\n    o.metadata->'product'->>'complexity' as product_complexity,\n    o.metadata->'business'->>'priority' as business_priority,\n    o.metadata->'business'->>'customerTier' as customer_tier,\n    o.metadata->'business'->>'rushOrder' as is_rush_order\n\nFROM \"orders\" o\n\nLEFT JOIN \"order_stages\" current_stage ON (\n  current_stage.order_id = o.id\n  AND current_stage.is_active = true\n)\nLEFT JOIN \"order_stages\" all_stages ON all_stages.order_id = o.id\n\nLEFT JOIN (\n  SELECT os.order_id,\n         COUNT(*) as total_stages,\n         COUNT(CASE WHEN os.status = 'completed' THEN 1 END) as completed_stages,\n         COUNT(CASE WHEN os.status = 'in_progress' THEN 1 END) as in_progress_stages,\n         COUNT(CASE WHEN os.status = 'pending' THEN 1 END) as pending_stages,\n         COUNT(CASE WHEN os.status = 'on_hold' THEN 1 END) as on_hold_stages\n  FROM \"order_stages\" os\n  GROUP BY os.order_id\n) stage_counts ON stage_counts.order_id = o.id\n\nLEFT JOIN (\n  SELECT osf.order_stage_id, COUNT(*) as files_count\n  FROM \"order_stage_files\" osf\n  GROUP BY osf.order_stage_id\n) stage_files ON stage_files.order_stage_id = all_stages.id\n\nLEFT JOIN (\n  SELECT osf.order_stage_id, COUNT(*) as files_count\n  FROM \"order_stage_files\" osf\n  GROUP BY osf.order_stage_id\n) current_stage_files ON current_stage_files.order_stage_id = current_stage.id\n\nLEFT JOIN (\n  SELECT os.order_id, COUNT(osf.*) as total_files_count\n  FROM \"order_stages\" os\n  LEFT JOIN \"order_stage_files\" osf ON osf.order_stage_id = os.id\n  GROUP BY os.order_id\n) total_files ON total_files.order_id = o.id\n\nLEFT JOIN attachments_latest a ON a.order_id = o.id\n\nWHERE o._deleted IS NULL\nGROUP BY\n  o.id, o.user_id, o.order_date, o.shipping_address, o.tracking_number,\n  o.total_amount, o.currency, o.metadata, o._created, o._updated, o._deleted,\n  current_stage.id, current_stage.stage_name, current_stage.status,\n  current_stage.sequence, current_stage.estimated_days,\n  stage_counts.total_stages, stage_counts.completed_stages, stage_counts.in_progress_stages,\n  stage_counts.pending_stages, stage_counts.on_hold_stages,\n  current_stage_files.files_count, total_files.total_files_count,\n  a.latest_attachments\n",
      "name": "order_details_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    }
  },
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}